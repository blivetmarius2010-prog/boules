<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pixel Dodge</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:#000;
  font-family:monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

.container{
  width:360px;
}

.screen{
  width:100%;
  height:420px;
  background:#111;
  border:6px solid #444;
  image-rendering:pixelated;
  position:relative;
  overflow:hidden;
}

.player{
  width:20px;
  height:20px;
  background:#4ade80;
  position:absolute;
  bottom:40px;
  left:170px;
}

.ball{
  width:16px;
  height:16px;
  background:#ef4444;
  position:absolute;
}

.gameover{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.9);
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:white;
}

.gameover button{
  margin-top:12px;
  padding:8px 16px;
  font-size:16px;
}

.controls{
  display:grid;
  grid-template-columns:1fr 1fr 1fr;
  gap:10px;
  margin-top:10px;
}

button{
  height:60px;
  font-size:22px;
  background:#222;
  color:white;
  border:4px solid #444;
}
</style>
</head>

<body>

<div class="container">
  <div class="screen" id="screen">
    <div class="player" id="player"></div>

    <div class="gameover" id="gameover">
      <div>üíÄ GAME OVER</div>
      <button onclick="restart()">REJOUER</button>
    </div>
  </div>

  <div class="controls">
    <button id="left">‚¨ÖÔ∏è</button>
    <button id="jump">‚¨ÜÔ∏è</button>
    <button id="right">‚û°Ô∏è</button>
  </div>
</div>

<script>
const screen = document.getElementById("screen");
const player = document.getElementById("player");
const gameover = document.getElementById("gameover");

let px, py, vy, jumping;
let balls = [];
let running = true;

function init(){
  px = 170;
  py = 0;
  vy = 0;
  jumping = false;
  balls.forEach(b=>b.remove());
  balls = [];
  running = true;
  gameover.style.display = "none";
  updatePlayer();
}

function updatePlayer(){
  player.style.left = px+"px";
  player.style.bottom = (40+py)+"px";
}

document.getElementById("left").ontouchstart = ()=>{ if(running) px=Math.max(0,px-20) };
document.getElementById("right").ontouchstart = ()=>{ if(running) px=Math.min(340,px+20) };
document.getElementById("jump").ontouchstart = ()=>{
  if(!jumping && running){
    vy = 16;
    jumping = true;
  }
};

function spawnBall(){
  if(!running) return;
  const b=document.createElement("div");
  b.className="ball";
  b.style.left=Math.random()*344+"px";
  b.style.top="-20px";
  screen.appendChild(b);
  balls.push(b);
}

setInterval(spawnBall, 800);

function loop(){
  if(running){
    // gravity
    if(jumping){
      py+=vy;
      vy-=1;
      if(py<=0){py=0;jumping=false}
      updatePlayer();
    }

    balls.forEach((b,i)=>{
      let y = b.offsetTop+5;
      b.style.top=y+"px";

      if(
        y > player.offsetTop-16 &&
        y < player.offsetTop+20 &&
        Math.abs(b.offsetLeft-px)<16
      ){
        endGame();
      }

      if(y>420){
        b.remove();
        balls.splice(i,1);
      }
    });
  }
  requestAnimationFrame(loop);
}

function endGame(){
  running=false;
  gameover.style.display="flex";
}

function restart(){
  init();
}

init();
loop();
</script>

</body>
</html>


